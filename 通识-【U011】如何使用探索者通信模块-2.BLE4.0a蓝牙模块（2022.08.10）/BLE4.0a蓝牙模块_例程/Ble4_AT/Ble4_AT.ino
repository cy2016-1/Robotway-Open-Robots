#include <arduino.h>
#include <Servo.h>
#include "LedControl.h"

String inputString = "";         // a string to hold incoming data
LedControl lc=LedControl(12,11,13,1); //config 8*8 led
Servo myServo[6];
int servo_port[6]={4,9,10,3,6,5};
boolean ledbuf[8][8];

void setup() 
{
  // initialize serial:
  Serial.begin(9600);
  // reserve 200 bytes for the inputString:
  inputString.reserve(200);

  LedInit();
#if 1
  Serial.print("AT");
  delay(100);
  Serial.print("AT+BAUD0");
  delay(100);
  Serial.print("AT+ROLE0");
  delay(100);
  Serial.print("AT+CLEAR");
  delay(100);
  Serial.print("AT+ROLE1");
  delay(100);
#endif
}

void loop() 
{
  char arr[5];
  LedLetter('8');
  delay(100);
  Serial.print("AT");
  Serial.print("AT");
  //delay(100);
  if(Serial.available())
  {
    LedLetter((char)(Serial.read()));
    delay(1000);
  }
}


/***************************************************** Led *******************************************************/
void LedInit() 
{
  lc.shutdown(0,false); //start the 8*8 led
  LedIntensity(8);
  LedClear(); 
}

void LedIntensity(int i) //0~15
{
  lc.setIntensity(0,i); 
}
void LedClear()
{
  lc.clearDisplay(0);
}
void LedDot(int x, int y, boolean s) 
{
  if(x<0)x=0;
  if(x>7)x=7;
  if(y<0)y=0;
  if(y>7)y=7;
  lc.setLed(0,x,y,s);
}
void LedShow()
{
  LedClear();
  for(int i=0;i<8;i++)
    for(int j=0;j<8;j++)
      LedDot(i,j,ledbuf[i][j]);
}
void LedLetter(char a)
{
  LedClear();
  byte j[8];
  switch(a)
  {
    case 'A': {j[0]=B00011000;j[1]=B00111100;j[2]=B00111100;j[3]=B01100110;j[4]=B01000010;j[5]=B01111110;j[6]=B01000010;j[7]=B01000010;break;}
    case 'B': {j[0]=B01111100;j[1]=B01100010;j[2]=B01100010;j[3]=B01111100;j[4]=B01111100;j[5]=B01100010;j[6]=B01100010;j[7]=B01111100;break;}
    case 'C': {j[0]=B00111110;j[1]=B01111111;j[2]=B01100011;j[3]=B01100000;j[4]=B01100000;j[5]=B01100011;j[6]=B01111111;j[7]=B00111110;break;}
    case 'D': {j[0]=B01111100;j[1]=B01100110;j[2]=B01100010;j[3]=B01100010;j[4]=B01100010;j[5]=B01100010;j[6]=B01100110;j[7]=B01111100;break;}
    case 'E': {j[0]=B00111110;j[1]=B00100000;j[2]=B00100000;j[3]=B00111100;j[4]=B00111100;j[5]=B00100000;j[6]=B00100000;j[7]=B00111110;break;}
    case 'F': {j[0]=B00111110;j[1]=B00100000;j[2]=B00100000;j[3]=B00111100;j[4]=B00111100;j[5]=B00100000;j[6]=B00100000;j[7]=B00100000;break;}
    case 'G': {j[0]=B00111100;j[1]=B01100110;j[2]=B01100010;j[3]=B01100000;j[4]=B01101110;j[5]=B01100010;j[6]=B01100010;j[7]=B00111110;break;}
    case 'H': {j[0]=B01100110;j[1]=B01100110;j[2]=B01100110;j[3]=B01111110;j[4]=B01111110;j[5]=B01100110;j[6]=B01100110;j[7]=B01100110;break;}
    case 'I': {j[0]=B00111100;j[1]=B00011000;j[2]=B00011000;j[3]=B00011000;j[4]=B00011000;j[5]=B00011000;j[6]=B00011000;j[7]=B00111100;break;}
    case 'J': {j[0]=B00000110;j[1]=B00000110;j[2]=B00000110;j[3]=B00000110;j[4]=B01100110;j[5]=B01100110;j[6]=B01111110;j[7]=B00111100;break;}
    case 'K': {j[0]=B01100010;j[1]=B01100100;j[2]=B01101000;j[3]=B01110000;j[4]=B01110000;j[5]=B01101000;j[6]=B01100100;j[7]=B01100010;break;}
    case 'L': {j[0]=B01100000;j[1]=B01100000;j[2]=B01100000;j[3]=B01100000;j[4]=B01100000;j[5]=B01100000;j[6]=B01111110;j[7]=B01111110;break;}
    case 'M': {j[0]=B11000011;j[1]=B11100111;j[2]=B11111111;j[3]=B11011011;j[4]=B11011011;j[5]=B11011011;j[6]=B11011011;j[7]=B11011011;break;}
    case 'N': {j[0]=B01100010;j[1]=B01100010;j[2]=B01110010;j[3]=B01011010;j[4]=B01011010;j[5]=B01001110;j[6]=B01000110;j[7]=B01000110;break;}
    case 'O': {j[0]=B00111100;j[1]=B01111110;j[2]=B11000011;j[3]=B11000011;j[4]=B11000011;j[5]=B11000011;j[6]=B01111110;j[7]=B00111100;break;}
    case 'P': {j[0]=B01111100;j[1]=B01100110;j[2]=B01100110;j[3]=B01100110;j[4]=B01111100;j[5]=B01100000;j[6]=B01100000;j[7]=B01100000;break;}
    case 'Q': {j[0]=B00111100;j[1]=B01000010;j[2]=B01000010;j[3]=B01000010;j[4]=B01000010;j[5]=B01001010;j[6]=B01000110;j[7]=B00111111;break;}
    case 'R': {j[0]=B01111100;j[1]=B01100010;j[2]=B01100010;j[3]=B01111100;j[4]=B01110000;j[5]=B01101000;j[6]=B01100100;j[7]=B01100010;break;}
    case 'S': {j[0]=B00111100;j[1]=B01000010;j[2]=B01100000;j[3]=B00110000;j[4]=B00011000;j[5]=B00001100;j[6]=B01000110;j[7]=B00111100;break;}
    case 'T': {j[0]=B01111110;j[1]=B01111110;j[2]=B00011000;j[3]=B00011000;j[4]=B00011000;j[5]=B00011000;j[6]=B00011000;j[7]=B00011000;break;}
    case 'U': {j[0]=B01100110;j[1]=B01100110;j[2]=B01100110;j[3]=B01100110;j[4]=B01100110;j[5]=B01100110;j[6]=B01111110;j[7]=B00111100;break;}
    case 'V': {j[0]=B01100110;j[1]=B01100110;j[2]=B01100110;j[3]=B01100110;j[4]=B00100100;j[5]=B00100100;j[6]=B00011000;j[7]=B00011000;break;}
    case 'W': {j[0]=B11011011;j[1]=B11011011;j[2]=B11011011;j[3]=B11011011;j[4]=B11011011;j[5]=B11011011;j[6]=B11011011;j[7]=B01111110;break;}
    case 'X': {j[0]=B01100110;j[1]=B01100110;j[2]=B00100100;j[3]=B00011000;j[4]=B00011000;j[5]=B00100100;j[6]=B01100110;j[7]=B01100110;break;}
    case 'Y': {j[0]=B01000010;j[1]=B01100110;j[2]=B00111100;j[3]=B00011000;j[4]=B00011000;j[5]=B00011000;j[6]=B00011000;j[7]=B00011000;break;}
    case 'Z': {j[0]=B01111110;j[1]=B01111110;j[2]=B00000110;j[3]=B00001100;j[4]=B00011000;j[5]=B00110000;j[6]=B01111110;j[7]=B01111110;break;}
    case '0': {j[0]=B00111100;j[1]=B01100110;j[2]=B01100110;j[3]=B01100110;j[4]=B01100110;j[5]=B01100110;j[6]=B01111110;j[7]=B00111100;break;}
    case '1': {j[0]=B00001000;j[1]=B00011000;j[2]=B00111000;j[3]=B00011000;j[4]=B00011000;j[5]=B00011000;j[6]=B00011000;j[7]=B00111100;break;}
    case '2': {j[0]=B00111100;j[1]=B01111110;j[2]=B00000110;j[3]=B00001100;j[4]=B00011000;j[5]=B00110000;j[6]=B01111110;j[7]=B00111110;break;}
    case '3': {j[0]=B00111100;j[1]=B01000010;j[2]=B00000110;j[3]=B00011100;j[4]=B00001100;j[5]=B00000110;j[6]=B01000010;j[7]=B00111100;break;}
    case '4': {j[0]=B00000100;j[1]=B00001100;j[2]=B00010100;j[3]=B00100100;j[4]=B01000100;j[5]=B01000100;j[6]=B01111110;j[7]=B00000100;break;}
    case '5': {j[0]=B01111110;j[1]=B01000000;j[2]=B01000000;j[3]=B01111100;j[4]=B00000010;j[5]=B00000010;j[6]=B01000010;j[7]=B00111100;break;}
    case '6': {j[0]=B00001000;j[1]=B00010000;j[2]=B00100000;j[3]=B01111100;j[4]=B01000010;j[5]=B01000010;j[6]=B01000010;j[7]=B00111100;break;}
    case '7': {j[0]=B01111110;j[1]=B01111110;j[2]=B00000110;j[3]=B00001100;j[4]=B00001100;j[5]=B00011000;j[6]=B00011000;j[7]=B00011000;break;}
    case '8': {j[0]=B00111100;j[1]=B01100110;j[2]=B01100110;j[3]=B00111100;j[4]=B00111100;j[5]=B01100110;j[6]=B01100110;j[7]=B00111100;break;}
    case '9': {j[0]=B00111100;j[1]=B01100110;j[2]=B01100110;j[3]=B01100110;j[4]=B00111110;j[5]=B00001100;j[6]=B00011000;j[7]=B00110000;break;}
    default : break;
  }

  for(int i=0;i<8;i++)
    lc.setRow(0,i,j[i]);
}
void LedLine(int i,byte a)
{
  lc.setRow(0,i,a);
}

